<!DOCTYPE html>
<html>
<head>
    <title>Taksi sluzba</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="proba.css">

    <script src="Scripts/jquery-1.10.2.js"></script>
    <script src="Scripts/jquery.validate.js"></script>
    <script src="Scripts/mojeskripte/functions.js"></script>

    <script type="text/javascript">
        function openPage(pageName, elmnt, color) {
            // Hide all elements with class="tabcontent" by default */
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            // Remove the background color of all tablinks/buttons
            tablinks = document.getElementsByClassName("tablink");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].style.backgroundColor = "";
            }
            // Show the specific tab content
            document.getElementById(pageName).style.display = "block";
            // Add the specific color to the button used to open the tab content
            elmnt.style.backgroundColor = color;
        }

        function formiraj() {

            let korisnik = {
                LokacijaTaksija: `${$('#lokacijaVoznje').val()}`,
                Vozac: `${$('#vozacSelect').val()}`,
                TipVozila: `${$('#tipAutomobila').val()}`,
            }

            $.ajax({
                url: 'api/dispecerVoznja/post',
                method: 'POST',
                data: JSON.stringify(korisnik),
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                success: function (data) {
                    alert("Uspesno formiran");
                    startApp();
                }
            });
        }

        function obradi() {
            $.ajax({
                url: '/api/dispecerObradaVoznje',
                method: 'GET',
                success: function (data) {
                    var i;
                    for (i = 0; i < data.length; i++) {
                        if ($("#check" + i).prop('checked')) {

                            let voznja =
			                {
			                    Adresa: `${data[i].LokacijaTaksija.Adresa}`,
			                    Vozac: `${$("#obradiVoznjuVozac").val()}`
			                }

                            $.ajax({
                                url: 'api/voznjeDispecer/post',
                                method: 'POST',
                                data: JSON.stringify(voznja),
                                contentType: 'application/json; charset=utf-8',
                                dataType: 'json',
                                success: function (data) {
                                    startDispecer();
                                }
                            });
                        }
                    }
                }
            });
        }

        function filtriraj() {
            let korisnik = {
                StatusVoznje: `${$('#sortStatusVoznja').val()}`,
            }

            $.ajax({
                url: 'api/filtriranjeDispecer/post',
                method: 'POST',
                data: JSON.stringify(korisnik),
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                success: function (data) {
                    $("#sveVoznjeMusterijaTabela").empty();
                    var s1 = $("<th></th>").text("Pocetna Adresa");
                    var s2 = $("<th></th>").text("Krajnja Adresa");
                    var s4 = $("<th></th>").text("Dispecer");
                    var s5 = $("<th></th>").text("Iznos");
                    var s6 = $("<th></th>").text("Status voznje");
                    var s7 = $("<th></th>").text("Vozac");
                    $("#sveVoznjeMusterijaTabela").append("<tr>", s1, s2, s4, s5, s6, s7, "</tr>");

                    var i;
                    var tipVoznje;
                    for (i = 0; i < data.length; i++) {
                        var txt1 = $("<td></td>").text(data[i].LokacijaTaksija.Adresa);
                        var txt2 = $("<td></td>").text(data[i].Odrediste.Adresa);
                        var txt4 = $("<td></td>").text(data[i].Dispecer);
                        var txt5 = $("<td></td>").text(data[i].Iznos);
                        if (data[i].StatusVoznje == 0) {
                            tipVoznje = "Kreirana";
                        }
                        else if (data[i].StatusVoznje == 1) {
                            tipVoznje = "Otkazana";
                        }
                        else if (data[i].StatusVoznje == 2) {
                            tipVoznje = "Formirana";
                        }
                        else if (data[i].StatusVoznje == 3) {
                            tipVoznje = "Odradjena";
                        }
                        else if (data[i].StatusVoznje == 4) {
                            tipVoznje = "Prihvacena";
                        }
                        else if (data[i].StatusVoznje == 5) {
                            tipVoznje = "Neuspesna";
                        }
                        else if (data[i].StatusVoznje == 6) {
                            tipVoznje = "Uspesna";
                        }
                        var txt7 = $("<td></td>").text(data[i].Vozac)
                        $("#sveVoznjeMusterijaTabela").append("<tr>", txt1, txt2, txt4, txt5, "<td>" + tipVoznje + "</td>", txt7, "</tr>");
                    }
                }
            });
        }

        function sortirajDatum() {
            alert("SORTIRAJ DATUM");
            $.ajax({
                url: 'api/sortirajDatumDispecer',
                method: 'GET',
                success: function (data) {
                    $("#sveVoznjeMusterijaTabela").empty();
                    var s1 = $("<th></th>").text("Pocetna Adresa");
                    var s2 = $("<th></th>").text("Krajnja Adresa");
                    var s4 = $("<th></th>").text("Dispecer");
                    var s5 = $("<th></th>").text("Iznos");
                    var s6 = $("<th></th>").text("Status voznje");
                    var s7 = $("<th></th>").text("Vozac");
                    $("#sveVoznjeMusterijaTabela").append("<tr>", s1, s2, s4, s5, s6, s7, "</tr>");

                    var i;

                    for (i = 0; i < data.length; i++) {
                        var txt1 = $("<td></td>").text(data[i].LokacijaTaksija.Adresa);
                        var txt2 = $("<td></td>").text(data[i].Odrediste.Adresa);
                        var txt4 = $("<td></td>").text(data[i].Dispecer);
                        var txt5 = $("<td></td>").text(data[i].Iznos);
                        if (data[i].StatusVoznje == 0) {
                            tipVoznje = "Kreirana";
                        }
                        else if (data[i].StatusVoznje == 1) {
                            tipVoznje = "Otkazana";
                        }
                        else if (data[i].StatusVoznje == 2) {
                            tipVoznje = "Formirana";
                        }
                        else if (data[i].StatusVoznje == 3) {
                            tipVoznje = "Odradjena";
                        }
                        else if (data[i].StatusVoznje == 4) {
                            tipVoznje = "Prihvacena";
                        }
                        else if (data[i].StatusVoznje == 5) {
                            tipVoznje = "Neuspesna";
                        }
                        else if (data[i].StatusVoznje == 6) {
                            tipVoznje = "Uspesna";
                        }
                        var txt7 = $("<td></td>").text(data[i].Vozac)
                        $("#sveVoznjeMusterijaTabela").append("<tr>", txt1, txt2, txt4, txt5, "<td>"+ tipVoznje+ "</td>", txt7, "</tr>");
                    }
                }
            });
        }

        function sortirajOcena() {
            alert("SORTIRAJ OCENA");
            $.ajax({
                url: 'api/sortirajOcenaDispecer',
                method: 'GET',
                success: function (data) {
                    $("#sveVoznjeMusterijaTabela").empty();
                    var s1 = $("<th></th>").text("Pocetna Adresa");
                    var s2 = $("<th></th>").text("Krajnja Adresa");
                    var s4 = $("<th></th>").text("Dispecer");
                    var s5 = $("<th></th>").text("Iznos");
                    var s6 = $("<th></th>").text("Status voznje");
                    var s7 = $("<th></th>").text("Vozac");
                    $("#sveVoznjeMusterijaTabela").append("<tr>", s1, s2, s4, s5, s6, s7, "</tr>");

                    var i;

                    for (i = 0; i < data.length; i++) {
                        var txt1 = $("<td></td>").text(data[i].LokacijaTaksija.Adresa);
                        var txt2 = $("<td></td>").text(data[i].Odrediste.Adresa);
                        var txt4 = $("<td></td>").text(data[i].Dispecer);
                        var txt5 = $("<td></td>").text(data[i].Iznos);
                        if (data[i].StatusVoznje == 0) {
                            tipVoznje = "Kreirana";
                        }
                        else if (data[i].StatusVoznje == 1) {
                            tipVoznje = "Otkazana";
                        }
                        else if (data[i].StatusVoznje == 2) {
                            tipVoznje = "Formirana";
                        }
                        else if (data[i].StatusVoznje == 3) {
                            tipVoznje = "Odradjena";
                        }
                        else if (data[i].StatusVoznje == 4) {
                            tipVoznje = "Prihvacena";
                        }
                        else if (data[i].StatusVoznje == 5) {
                            tipVoznje = "Neuspesna";
                        }
                        else if (data[i].StatusVoznje == 6) {
                            tipVoznje = "Uspesna";
                        }
                        var txt7 = $("<td></td>").text(data[i].Vozac)
                        $("#sveVoznjeMusterijaTabela").append("<tr>", txt1, txt2, txt4, txt5, "<td>"+ tipVoznje+ "</td>", txt7, "</tr>");
                    }
                }
            });
        }

        function pretraziDatum() {
            let korisnik = {
                Od: `${$('#od').val()}`,
                Do: `${$('#do').val()}`,
            }

            $.ajax({
                url: 'api/pretragaDatumDispecer/post',
                method: 'POST',
                data: JSON.stringify(korisnik),
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                success: function (data) {
                    $("#sveVoznjeMusterijaTabela").empty();
                    var s1 = $("<th></th>").text("Pocetna Adresa");
                    var s2 = $("<th></th>").text("Krajnja Adresa");
                    var s4 = $("<th></th>").text("Dispecer");
                    var s5 = $("<th></th>").text("Iznos");
                    var s6 = $("<th></th>").text("Status voznje");
                    var s7 = $("<th></th>").text("Vozac");
                    $("#sveVoznjeMusterijaTabela").append("<tr>", s1, s2, s4, s5, s6, s7, "</tr>");

                    var i;

                    for (i = 0; i < data.length; i++) {
                        var txt1 = $("<td></td>").text(data[i].LokacijaTaksija.Adresa);
                        var txt2 = $("<td></td>").text(data[i].Odrediste.Adresa);
                        var txt4 = $("<td></td>").text(data[i].Dispecer);
                        var txt5 = $("<td></td>").text(data[i].Iznos);
                        if (data[i].StatusVoznje == 0) {
                            tipVoznje = "Kreirana";
                        }
                        else if (data[i].StatusVoznje == 1) {
                            tipVoznje = "Otkazana";
                        }
                        else if (data[i].StatusVoznje == 2) {
                            tipVoznje = "Formirana";
                        }
                        else if (data[i].StatusVoznje == 3) {
                            tipVoznje = "Odradjena";
                        }
                        else if (data[i].StatusVoznje == 4) {
                            tipVoznje = "Prihvacena";
                        }
                        else if (data[i].StatusVoznje == 5) {
                            tipVoznje = "Neuspesna";
                        }
                        else if (data[i].StatusVoznje == 6) {
                            tipVoznje = "Uspesna";
                        }
                        var txt7 = $("<td></td>").text(data[i].Vozac)
                        $("#sveVoznjeMusterijaTabela").append("<tr>", txt1, txt2, txt4, txt5, "<td>" + tipVoznje + "</td>", txt7, "</tr>");
                    }
                }
            });
        }

        function pretraziOcena() {
            let korisnik = {
                OdOcena: `${$('#odOcena').val()}`,
                DoOcena: `${$('#doOcena').val()}`,
            }

            $.ajax({
                url: 'api/pretragaOcenaDispecer/post',
                method: 'POST',
                data: JSON.stringify(korisnik),
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                success: function (data) {
                    $("#sveVoznjeMusterijaTabela").empty();
                    var s1 = $("<th></th>").text("Pocetna Adresa");
                    var s2 = $("<th></th>").text("Krajnja Adresa");
                    var s4 = $("<th></th>").text("Dispecer");
                    var s5 = $("<th></th>").text("Iznos");
                    var s6 = $("<th></th>").text("Status voznje");
                    var s7 = $("<th></th>").text("Vozac");
                    $("#sveVoznjeMusterijaTabela").append("<tr>", s1, s2, s4, s5, s6, s7, "</tr>");

                    var i;

                    for (i = 0; i < data.length; i++) {
                        var txt1 = $("<td></td>").text(data[i].LokacijaTaksija.Adresa);
                        var txt2 = $("<td></td>").text(data[i].Odrediste.Adresa);
                        var txt4 = $("<td></td>").text(data[i].Dispecer);
                        var txt5 = $("<td></td>").text(data[i].Iznos);
                        if (data[i].StatusVoznje == 0) {
                            tipVoznje = "Kreirana";
                        }
                        else if (data[i].StatusVoznje == 1) {
                            tipVoznje = "Otkazana";
                        }
                        else if (data[i].StatusVoznje == 2) {
                            tipVoznje = "Formirana";
                        }
                        else if (data[i].StatusVoznje == 3) {
                            tipVoznje = "Odradjena";
                        }
                        else if (data[i].StatusVoznje == 4) {
                            tipVoznje = "Prihvacena";
                        }
                        else if (data[i].StatusVoznje == 5) {
                            tipVoznje = "Neuspesna";
                        }
                        else if (data[i].StatusVoznje == 6) {
                            tipVoznje = "Uspesna";
                        }
                        var txt7 = $("<td></td>").text(data[i].Vozac)
                        $("#sveVoznjeMusterijaTabela").append("<tr>", txt1, txt2, txt4, txt5, "<td>" + tipVoznje + "</td>", txt7, "</tr>");
                    }
                }
            });
        }

        function pretraziCenu() {

            let korisnik = {
                OdOcena: `${$('#odCena').val()}`,
                DoOcena: `${$('#doCena').val()}`,
            }

            $.ajax({
                url: 'api/pretragaCenaDispecer/post',
                method: 'POST',
                data: JSON.stringify(korisnik),
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                success: function (data) {
                    $("#sveVoznjeMusterijaTabela").empty();
                    var s1 = $("<th></th>").text("Pocetna Adresa");
                    var s2 = $("<th></th>").text("Krajnja Adresa");
                    var s4 = $("<th></th>").text("Dispecer");
                    var s5 = $("<th></th>").text("Iznos");
                    var s6 = $("<th></th>").text("Status voznje");
                    var s7 = $("<th></th>").text("Vozac");
                    $("#sveVoznjeMusterijaTabela").append("<tr>", s1, s2, s4, s5, s6, s7, "</tr>");

                    var i;

                    for (i = 0; i < data.length; i++) {
                        var txt1 = $("<td></td>").text(data[i].LokacijaTaksija.Adresa);
                        var txt2 = $("<td></td>").text(data[i].Odrediste.Adresa);
                        var txt4 = $("<td></td>").text(data[i].Dispecer);
                        var txt5 = $("<td></td>").text(data[i].Iznos);
                        if (data[i].StatusVoznje == 0) {
                            tipVoznje = "Kreirana";
                        }
                        else if (data[i].StatusVoznje == 1) {
                            tipVoznje = "Otkazana";
                        }
                        else if (data[i].StatusVoznje == 2) {
                            tipVoznje = "Formirana";
                        }
                        else if (data[i].StatusVoznje == 3) {
                            tipVoznje = "Odradjena";
                        }
                        else if (data[i].StatusVoznje == 4) {
                            tipVoznje = "Prihvacena";
                        }
                        else if (data[i].StatusVoznje == 5) {
                            tipVoznje = "Neuspesna";
                        }
                        else if (data[i].StatusVoznje == 6) {
                            tipVoznje = "Uspesna";
                        }
                        var txt7 = $("<td></td>").text(data[i].Vozac)
                        $("#sveVoznjeMusterijaTabela").append("<tr>", txt1, txt2, txt4, txt5, "<td>" + tipVoznje + "</td>", txt7, "</tr>");
                    }
                }
            });
        }

        function reset() {
            $.ajax({
                url: 'api/dispecerSveVoznje/get',
                method: 'GET',

                success: function (data) {
                    $("#sveVoznjeMusterijaTabela").empty();
                    var s1 = $("<th></th>").text("Pocetna Adresa");
                    var s2 = $("<th></th>").text("Krajnja Adresa");
                    var s4 = $("<th></th>").text("Dispecer");
                    var s5 = $("<th></th>").text("Iznos");
                    var s6 = $("<th></th>").text("Status voznje");
                    var s7 = $("<th></th>").text("Vozac");
                    $("#sveVoznjeMusterijaTabela").append("<tr>", s1, s2, s4, s5, s6, s7, "</tr>");

                    var i;

                    for (i = 0; i < data.length; i++) {
                        var txt1 = $("<td></td>").text(data[i].LokacijaTaksija.Adresa);
                        var txt2 = $("<td></td>").text(data[i].Odrediste.Adresa);
                        var txt4 = $("<td></td>").text(data[i].Dispecer);
                        var txt5 = $("<td></td>").text(data[i].Iznos);
                        if (data[i].StatusVoznje == 0) {
                            tipVoznje = "Kreirana";
                        }
                        else if (data[i].StatusVoznje == 1) {
                            tipVoznje = "Otkazana";
                        }
                        else if (data[i].StatusVoznje == 2) {
                            tipVoznje = "Formirana";
                        }
                        else if (data[i].StatusVoznje == 3) {
                            tipVoznje = "Odradjena";
                        }
                        else if (data[i].StatusVoznje == 4) {
                            tipVoznje = "Prihvacena";
                        }
                        else if (data[i].StatusVoznje == 5) {
                            tipVoznje = "Neuspesna";
                        }
                        else if (data[i].StatusVoznje == 6) {
                            tipVoznje = "Uspesna";
                        }
                        var txt7 = $("<td></td>").text(data[i].Vozac)
                        $("#sveVoznjeMusterijaTabela").append("<tr>", txt1, txt2, txt4, txt5, "<td>" + tipVoznje + "</td>", txt7, "</tr>");
                    }
                }
            });
        }

        function pretraziImeIPrezime() {

            let korisnik = {
                OdOcena: `${$('#imePretraga').val()}`,
                DoOcena: `${$('#prezimePretraga').val()}`,
            }

            $.ajax({
                url: 'api/pretragaImeIPrezime/post',
                method: 'POST',
                data: JSON.stringify(korisnik),
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                success: function (data) {
                    $("#sveVoznjeMusterijaTabela").empty();
                    var s1 = $("<th></th>").text("Pocetna Adresa");
                    var s2 = $("<th></th>").text("Krajnja Adresa");
                    var s4 = $("<th></th>").text("Dispecer");
                    var s5 = $("<th></th>").text("Iznos");
                    var s6 = $("<th></th>").text("Status voznje");
                    var s7 = $("<th></th>").text("Vozac");
                    $("#sveVoznjeMusterijaTabela").append("<tr>", s1, s2, s4, s5, s6, s7, "</tr>");

                    var i;

                    for (i = 0; i < data.length; i++) {
                        var txt1 = $("<td></td>").text(data[i].LokacijaTaksija.Adresa);
                        var txt2 = $("<td></td>").text(data[i].Odrediste.Adresa);
                        var txt4 = $("<td></td>").text(data[i].Dispecer);
                        var txt5 = $("<td></td>").text(data[i].Iznos);
                        if (data[i].StatusVoznje == 0) {
                            tipVoznje = "Kreirana";
                        }
                        else if (data[i].StatusVoznje == 1) {
                            tipVoznje = "Otkazana";
                        }
                        else if (data[i].StatusVoznje == 2) {
                            tipVoznje = "Formirana";
                        }
                        else if (data[i].StatusVoznje == 3) {
                            tipVoznje = "Odradjena";
                        }
                        else if (data[i].StatusVoznje == 4) {
                            tipVoznje = "Prihvacena";
                        }
                        else if (data[i].StatusVoznje == 5) {
                            tipVoznje = "Neuspesna";
                        }
                        else if (data[i].StatusVoznje == 6) {
                            tipVoznje = "Uspesna";
                        }
                        var txt7 = $("<td></td>").text(data[i].Vozac)
                        $("#sveVoznjeMusterijaTabela").append("<tr>", txt1, txt2, txt4, txt5, "<td>", tipVoznje, "</td>", txt7, "</tr>");
                    }
                }
            });
        }

        function blokirajDugme() {
            var a;
            var b = globalReturn2();
            for (a = 0; a < b; a++) {
                if ($("#checkbox" + a).prop('checked')) {
                    let korisnik =
					{
					    Iznos: `${a}`,
					}
                    $.ajax({
                        url: 'api/korisnici/post',
                        method: 'POST',
                        data: JSON.stringify(korisnik),
                        contentType: 'application/json; charset=utf-8',
                        dataType: 'json',
                        success: function (data) {
                            alert(data);
                        }
                    })
                }
            }
            loadDispecer();
        }

    </script>
    <script type="text/javascript">
        $(document).ready(function () {
            jQuery('#Myprofile').click();
            $("#Myprofile").click(function () {
                $.ajax({
                    url: '/api/dispecer',
                    method: 'GET',
                    success: function (data) {                
                        $("#korisnickoImePromenaDispecer").val(data.KorisnickoIme);
                        $("#imePromenaDispecer").val(data.Ime);
                        $("#prezimePromenaDispecer").val(data.Prezime);
                        $("#kontaktTelefonPromenaDispecer").val(data.KontaktTelefon);
                        if (data.Pol == 0) {
                            $("#Muski").attr("selected", "true");
                        }
                        else {
                            $("#Zenski").attr("selected", "true");
                        }
                        $("#lozinkaPromenaDispecer").val(data.Lozinka);
                        $("#jmbgPromenaDispecer").val(data.Jmbg);
                        $("#emailPromenaDispecer").val(data.Email);
                        $("#uloga").val(data.Uloga);
                        $("#voznje").val(data.VoznjeKorisnika);
                    }
                });
            });
            $("#FormirajVoznjuTab").click(function () {
                $.ajax({
                    url: '/api/dispecerVoznja',
                    method: 'GET',
                    success: function (data) {
                        $("#vozacSelect").empty();
                        var i;
                        for (i = 0; i < data.length; i++) {
                            var s = $("<option value=\"" + data[i].KorisnickoIme + "\" >" + data[i].KorisnickoIme + "</option>").attr("id", data[i].KorisnickoIme);
                            $("#vozacSelect").append(s);
                        }
                    }
                });
            });
            $("#pocetna").click(function () {
                $("#tabelaPocetna").empty();
                var t1 = $("<td></td>").text("Lokacija");
                var t2 = $("<td></td>").text("Vreme zahteva");
                var t3 = $("<td></td>").text("Tip vozila");
                var t4 = $("<td></td>").text("Musterija");
                var t5 = $("<td></td>").text("Vozac");
                var t6 = $("<td></td>").text("Iznos");
                var t7 = $("<td></td>").text("Stanje voznje");
                var t8 = $("<td></td>").text("Komentar");
                var t9 = $("<td></td>").text("Datum Komentara");
                var t10 = $("<td></td>").text("Ocena");
                $("#tabelaPocetna").append("<tr>",t1,t2,t3,t4,t5,t6,t7,t8,t9,t10,"</tr>");
                $.ajax({
                    url: '/api/dispecerLicneVoznje',
                    method: 'GET',
                    success: function (data) {
                        var i;
                        var tip;
                        var tipVoznje;
                        for (i = 0; i < data.length; i++) {
                            var s1 = $("<td></td>").text(data[i].Odrediste.Adresa);
                            var s2 = $("<td></td>").text(data[i].Datum);
                            if (data[i].TipVozila == 0) {
                                tip = "Putnicki";
                            }
                            else if (data[i].TipVozila == 1) {
                                tip = "Kombi";
                            }
                            else if (data[i].TipVozila == 2) {
                                tip = "Podrazumevani";
                            }
                            var s3 = $("<td></td>").text(tip);
                            var s4 = $("<td></td>").text(data[i].Musterija);
                            var s5 = $("<td></td>").text(data[i].Vozac);
                            var s6 = $("<td></td>").text(data[i].Iznos);
                            if (data[i].StatusVoznje == 0) {
                                tipVoznje = "Kreirana";
                            }
                            else if (data[i].StatusVoznje == 1) {
                                tipVoznje = "Otkazana";
                            }
                            else if (data[i].StatusVoznje == 2) {
                                tipVoznje = "Formirana";
                            }
                            else if (data[i].StatusVoznje == 3) {
                                tipVoznje = "Odradjena";
                            }
                            else if (data[i].StatusVoznje == 4) {
                                tipVoznje = "Prihvacena";
                            }
                            else if (data[i].StatusVoznje == 5) {
                                tipVoznje = "Neuspesna";
                            }
                            else if (data[i].StatusVoznje == 6) {
                                tipVoznje = "Uspesna";
                            }
                            var s7 = $("<td></td>").text(tipVoznje);
                            var s8 = $("<td></td>").text(data[i].Komentar.Opis);
                            var s9 = $("<td></td>").text(data[i].Komentar.DatumObjave);
                            var s10 = $("<td></td>").text(data[i].Komentar.OcenaVoznje);

                            $("#tabelaPocetna").append("<tr>", s1, s2, s3, s4, s5, s6, s7, s8, s9, s10, "</tr>");
                        }
                    }
                });
                $("#tabelaPocetna2").empty();
                var t1 = $("<td></td>").text("Lokacija");
                var t2 = $("<td></td>").text("Vreme zahteva");
                var t3 = $("<td></td>").text("Tip vozila");
                var t4 = $("<td></td>").text("Musterija");
                var t5 = $("<td></td>").text("Vozac");
                var t6 = $("<td></td>").text("Iznos");
                var t7 = $("<td></td>").text("Stanje voznje");
                var t8 = $("<td></td>").text("Komentar");
                var t9 = $("<td></td>").text("Datum Komentara");
                var t10 = $("<td></td>").text("Ocena");
                $("#tabelaPocetna2").append("<tr>", t1, t2, t3, t4, t5, t6, t7, t8, t9, t10, "</tr>");
                $.ajax({
                    url: '/api/dispecerSveVoznje',
                    method: 'GET',
                    success: function (data) {
                        var i;
                        var tip;
                        var tipVoznje;
                        for (i = 0; i < data.length; i++) {
                            var s1 = $("<td></td>").text(data[i].Odrediste.Adresa);
                            var s2 = $("<td></td>").text(data[i].Datum);
                            if (data[i].TipVozila == 0) {
                                tip = "Putnicki";
                            }
                            else if (data[i].TipVozila == 1) {
                                tip = "Kombi";
                            }
                            else if (data[i].TipVozila == 2) {
                                tip = "Podrazumevani";
                            }
                            var s3 = $("<td></td>").text(tip);
                            var s4 = $("<td></td>").text(data[i].Musterija);
                            var s5 = $("<td></td>").text(data[i].Vozac);
                            var s6 = $("<td></td>").text(data[i].Iznos);
                            if (data[i].StatusVoznje == 0) {
                                tipVoznje = "Kreirana";
                            }
                            else if (data[i].StatusVoznje == 1) {
                                tipVoznje = "Otkazana";
                            }
                            else if (data[i].StatusVoznje == 2) {
                                tipVoznje = "Formirana";
                            }
                            else if (data[i].StatusVoznje == 3) {
                                tipVoznje = "Odradjena";
                            }
                            else if (data[i].StatusVoznje == 4) {
                                tipVoznje = "Prihvacena";
                            }
                            else if (data[i].StatusVoznje == 5) {
                                tipVoznje = "Neuspesna";
                            }
                            else if (data[i].StatusVoznje == 6) {
                                tipVoznje = "Uspesna";
                            }
                            var s7 = $("<td></td>").text(tipVoznje);
                            var s8 = $("<td></td>").text(data[i].Komentar.Opis);
                            var s9 = $("<td></td>").text(data[i].Komentar.DatumObjave);
                            var s10 = $("<td></td>").text(data[i].Komentar.OcenaVoznje);

                            $("#tabelaPocetna2").append("<tr>", s1, s2, s3, s4, s5, s6, s7, s8, s9, s10, "</tr>");
                        }
                    }
                });
            });
            $("#obradi").click(function () {
                $("#obradiVoznjuTabela").empty();
                $("#obradiVoznjuVozac").empty();
                $("#obradiVoznjuTabela").append("<tr><th colspan=\"3\" align=\"center\">Voznje na cekanju</th></tr>");
                $("#obradiVoznjuTabela").append("<tr><th>Ulica</th><th>Broj</th><th></th></tr>");
                $.ajax({
                    url: '/api/dispecerObradaVoznje',
                    method: 'GET',
                    success: function (data) {

                        var i;

                        for (i = 0; i < data.length; i++) {
                            var txt1 = $("<td><input type=\"text\" readonly value=\"" + data[i].LokacijaTaksija.Adresa + "\" id=\"ulica" + i + "\"></td>").text(data[i].LokacijaTaksija.Adresa);
                            var txt3 = $("<td><input type=\"radio\" name=\"radioButton\"id=\"check" + i + "\"></td>");
                            $("#obradiVoznjuTabela").append("<tr>", txt1, txt3, "</tr>");
                        }
                    }
                });
                $.ajax({
                    url: '/api/vozaci',
                    method: 'GET',
                    success: function (data) {
                        var i;

                        for (i = 0; i < data.length; i++) {
                            var txt1 = $("<option value=\"" + data[i].KorisnickoIme + "\" >" + data[i].KorisnickoIme + "</option>").text(data[i].KorisnickoIme);
                            $("#obradiVoznjuVozac").append(txt1);
                        }
                    }
                });
            });
            $("#blokiraj").click(function () {
                $("#korisnici").empty();
                var s1 = $("<th></th>").text("Korisnicko ime");
                var s2 = $("<th></th>");
                $("#korisnici").append("<tr>", s1, s2, "</tr>");

                $.get("/api/korisnici", function (data, status) {
                    var i;
                    globalSet2(data.length);
                    for (i = 0; i < data.length; i++) {
                        var txt1 = $("<td></td>").text(data[i].KorisnickoIme);
                        $("#korisnici").append("<tr>", txt1, "<td><input type=\"checkbox\" name=\"korisnik\" id=\"checkbox" + i + "\">", "</td></tr>");
                    }

                });
            });
        });
    </script>
</head>
<body>
    <h1>DISPECER</h1>
    <!-- Tab links -->

    <button class="tablink" id="pocetna" onclick="openPage('Pocetna', this)">Pocetna</button>
    <button class="tablink" id="Myprofile" onclick="openPage('My Profile', this)">My Profile</button>
    <button class="tablink" id="FormirajVoznjuTab" onclick="openPage('Formiraj voznju', this)">Formiraj voznju</button>
    <button class="tablink" id="obradi" onclick="openPage('Obradi voznju', this)">Obradi voznju</button>
    <button class="tablink" onclick="openPage('Napravi vozaca', this)">Napravi vozaca</button>
    <button class="tablink" id="blokiraj" onclick="openPage('Blokiraj korisnika', this)">Blokiraj korisnika</button>


    <div id="Napravi vozaca" class="tabcontent">
        <p>
            <form method="post" id="kreirajVozacaId">
                <table>
                    <tr>
                        <th colspan="2" align="center">Podaci vozaca</th>
                    </tr>
                    <tr>
                        <th>Korisnicko ime: </th>
                        <td><input type="text" name="korisnickoIme" id="korisnickoIme2"></td>
                    </tr>
                    <tr>
                        <th>Lozinka: </th>
                        <td><input type="text" name="lozinka" id="lozinka2"></td>
                    </tr>
                    <tr>
                        <th>Ime: </th>
                        <td><input type="text" name="ime" id="ime2"></td>
                    </tr>
                    <tr>
                        <th>Prezime: </th>
                        <td><input type="text" name="prezime" id="prezime2"></td>
                    </tr>
                    <tr>

                        <th>Pol: </th>
                        <td>
                            <select id="pol2" name="pol">
                                <option value="Muski" id="Muski">Muski</option>
                                <option selected value="Zenski" id="Zenski">Zenski</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <th>JMBG: </th>
                        <td><input type="text" name="jmbg" id="jmbg2"></td>
                    </tr>
                    <tr>
                        <th>Kontakt telefon: </th>
                        <td><input type="text" name="kontaktTelefon" id="kontaktTelefon2"></td>
                    </tr>
                    <tr>
                        <th>E-mail: </th>
                        <td><input type="text" name="email" id="email2"></td>
                    </tr>
                    <tr><input type="hidden" name="uloga" value="Vozac"></tr>
                    <tr>
                        <td colspan="2" align="center"><input type="submit" value="Sačuvaj"></td>
                    </tr>
                </table>
                
            </form>
            <script>
                kreirajVozaca();
            </script>
        </p>
    </div>

    <div id="My Profile" class="tabcontent">
        <h3>My Profile</h3>
        <p>
            <form method="post" id="izmenaDispecera">
                <table>
                    <tr>
                        <th colspan="2" align="center">Vaši podaci</th>
                    </tr>
                    <tr>
                        <th>Korisnicko ime: </th>
                        <td><input type="text" readonly name="korisnickoIme" id="korisnickoImePromenaDispecer"></td>
                    </tr>
                    <tr>
                        <th>Lozinka: </th>
                        <td><input type="text" name="lozinka" id="lozinkaPromenaDispecer"></td>
                    </tr>
                    <tr>
                        <th>Ime: </th>
                        <td><input type="text" name="ime" id="imePromenaDispecer"></td>
                    </tr>
                    <tr>
                        <th>Prezime: </th>
                        <td><input type="text" name="prezime" id="prezimePromenaDispecer"></td>
                    </tr>
                    <tr>

                        <th>Pol: </th>
                        <td>
                            <select id="polPromenaDispecer" name="pol">
                                <option value="Muski" id="Muski">Muski</option>
                                <option value="Zenski" id="Zenski">Zenski</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <th>JMBG: </th>
                        <td><input type="text" name="jmbg" id="jmbgPromenaDispecer"></td>
                    </tr>
                    <tr>
                        <th>Kontakt telefon: </th>
                        <td><input type="text" name="kontaktTelefon" id="kontaktTelefonPromenaDispecer"></td>
                    </tr>
                    <tr>
                        <th>E-mail: </th>
                        <td><input type="text" name="email" id="emailPromenaDispecer"></td>
                    </tr>
                    <tr>
                        <td colspan="2" align="center"><input type="submit" value="Sačuvaj"></td>
                    </tr>
                </table>
            </form>
            <script>
                validatePromenaDispecer();
            </script>
        </p>
    </div>

    <div id="Pocetna" class="tabcontent">
        <h1>                                    SVE VASE VOZNJE</h1>
        <table id="tabelaPocetna" border="1">
            
        </table>

        <h1>                                    SVE VOZNJE</h1>
        <table id="tabelaPocetna2" border="1">

        </table>

        <h1>                                    TABELA ZA SORTIRANJE</h1>
        <table id="sveVoznjeMusterijaTabela" border="1">

        </table>
        <select id="sortStatusVoznja">
            <option value="Izaberi..." id="Izaberi...">Izaberi...</option>
            <option value="Kreirana" id="Kreirana">Kreirana</option>
            <option value="Formirana" id="Formirana">Formirana</option>
            <option value="Odradjena" id="Obradjena">Obradjena</option>
            <option value="Prihvacena" id="Prihvacena">Prihvacena</option>
            <option value="Otkazana" id="Otkazana">Otkazana</option>
            <option value="Neuspesna" id="Neuspesna">Neuspesna</option>
            <option value="Uspesna" id="Uspesna">Uspesna</option>
        </select>
        <br/>
        <input type="submit" value="Filtriraj po statusu voznje" onclick="filtriraj()">
        <br/>
        <input type="submit" value="Sortiraj po datumu" onclick="sortirajDatum()">
        <br/>
        <input type="submit" value="Sortiraj po ocenama" onclick="sortirajOcena()">
        <br/>

        <label for="od">OD: </label>
        <input type="date" id="od" name="od"
               min="2018-01-01" max="2020-01-01" />
        <span class="validity"></span>
        <label for="do">DO: </label>
        <input type="date" id="do" name="do"
               min="2018-01-01" max="2020-01-01" />
        <span class="validity"></span>
        <input type="submit" value="Pretrazi" onclick="pretraziDatum()">

        <br/>

        <label>OD: </label>
        <select id="odOcena">
            <option value="Izaberi..." id="IzaberiOcenaOd">Izaberi...</option>
            <option value="0" id="ocenaOd0">0</option>
            <option value="1" id="ocenaOd1">1</option>
            <option value="2" id="ocenaOd2">2</option>
            <option value="3" id="ocenaOd3">3</option>
            <option value="4" id="ocenaOd4">4</option>
            <option value="5" id="ocenaOd5">5</option>
        </select>
        <label>DO: </label>
        <select id="doOcena">
            <option value="Izaberi..." id="IzaberiOcenaDo">Izaberi...</option>
            <option value="0" id="ocenaDo0">0</option>
            <option value="1" id="ocenaDo1">1</option>
            <option value="2" id="ocenaDo2">2</option>
            <option value="3" id="ocenaDo3">3</option>
            <option value="4" id="ocenaDo4">4</option>
            <option value="5" id="ocenaDo5">5</option>
        </select>
        <input type="submit" value="Pretrazi" onclick="pretraziOcena()">

        <br/>

        <label>OD: </label>
        <input type="text" id="odCena" value="">
        <label>DO: </label>
        <input type="text" id="doCena" value="">
        <input type="submit" value="Pretrazi" onclick="pretraziCenu()">

        <br/>
        <label>IME: </label>
        <input type="text" id="imePretraga" value="">
        <label>PREZIME: </label>
        <input type="text" id="prezimePretraga" value="">
        <input type="submit" value="Pretrazi" onclick="pretraziImeIPrezime()">
        <br/>
        <input type="submit" value="Reset" onclick="reset()">
        <br/>
    </div>

    <div id="Formiraj voznju" class="tabcontent">
        <table border="1">
            <tr>
                <th>
                    Lokacija
                </th>
                <td>
                    <input type="text" name="lokacija" id="lokacijaVoznje">
                </td>
            </tr>
            <tr>
                <th>
                    Vozilo
                </th>
                <td>
                    <select id="tipAutomobila" name="Automobil.tipAutomobila">
                        <option value="Podrazumevani" id="PodrazumevaniZahtev">Podrazumevani</option>
                        <option value="Putnicki" id="PutnickiZahtev">Putnicki</option>
                        <option value="Kombi" id="KombiZahtev">Kombi</option>
                    </select>
                </td>
            </tr>
            <tr>
                <th>
                    Vozac
                </th>
                <td>
                    <select id="vozacSelect" name="Vozac">
                    </select>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <input type="submit" name="submit" id="dugme" onclick="formiraj()">
                </td>
            </tr>
        </table>
    </div>

    <div id="Obradi voznju" class="tabcontent">
        <table id="obradiVoznjuTabela" border="1"></table>
        <select id="obradiVoznjuVozac"></select>
        <input type="submit" value="Obradi" onclick="obradi()">
    </div>

    <div class="tabcontent" id="Blokiraj korisnika">
        <p>
            <table id="korisnici" border="1"></table>
            <input type="submit" value="OK" onclick="blokirajDugme()">
        </p>
    </div>

</body>
</html>