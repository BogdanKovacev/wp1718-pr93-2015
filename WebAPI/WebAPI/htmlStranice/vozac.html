<!DOCTYPE html>
<html>
<head>
    <title>Taksi sluzba</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="proba.css">
    <script src="Scripts/jquery-1.10.2.js"></script>
    <script src="Scripts/jquery.validate.js"></script>

    <script type="text/javascript">

        function openPage(pageName, elmnt, color) {
            // Hide all elements with class="tabcontent" by default */
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }

            // Remove the background color of all tablinks/buttons
            tablinks = document.getElementsByClassName("tablink");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].style.backgroundColor = "";
            }

            // Show the specific tab content
            document.getElementById(pageName).style.display = "block";

            // Add the specific color to the button used to open the tab content
            elmnt.style.backgroundColor = color;
        }
    </script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#Myprofile").click(function () {
                $.get("/api/vozac", function (data, status) {
                    $("#korisnickoIme").val(data.KorisnickoIme);
                    $("#ime").val(data.Ime);
                    $("#prezime").val(data.Prezime);
                    if (data.Pol == 0) {
                        $("#Muski").attr("selected", "true");
                    }
                    else {
                        $("#Zenski").attr("selected", "true");
                    }
                    $("#kontaktTelefon").val(data.KontaktTelefon);
                    $("#lozinka").val(data.Lozinka);
                    $("#jmbg").val(data.Jmbg);
                    $("#email").val(data.Email);
                    $("#voznje").val(data.VoznjeKorisnika);
                    $("#godisteAutomobila").val(data.Automobil.GodisteAutomobila);
                    $("#registracija").val(data.Automobil.Registracija);
                    $("#uloga").val(data.Uloga);
                    $("#brojTaksiVozila").val(data.Automobil.BrojTaksiVozila);
                    if (data.TipAutomobila == 0) {
                        $("#Putnicki").attr("selected", "true");
                    }
                    else if (data.TipAutomobila == 1) {
                        $("#Kombi").attr("selected", "true");
                    }
                    else if (data.TipAutomobila == 2) {
                        $("#Podrazumevani").attr("selected", "true");
                    }
                });
            });
            $("#Lokacija2").click(function () {
                $.get("/api/vozacLokacija", function (data, status) {
                    $("#lokacija1").val(data.Lokacija.Adresa);
                    $("#korisnickoImeVozaca").val(data.KorisnickoIme);
                });
            });
        });
    </script>
</head>
    <body>
        <h1>VOZAC</h1>
        <!-- Tab links -->

        <button class="tablink" onclick="openPage('Pocetna', this)">Pocetna</button>
        <button class="tablink" id="Myprofile" onclick="openPage('My Profile', this)">My Profile</button>
        <button class="tablink" id="Lokacija2" onclick="openPage('Lokacija', this)">Lokacija</button>
        <button class="tablink" onclick="openPage('Trenutna voznja', this)">Trenutna voznja</button>

        <div id="Pocetna" class="tabcontent">
            Voznje: <input type="text" name="voznje">
        </div>

        <div id="My Profile" class="tabcontent">
            <h3>My Profile</h3>
            
            <form method="post" id="promeniVozaca">
                <p>
                    <table>
                        <tr>
                            <th colspan="2" align="center">Vaši podaci</th>
                        </tr>
                        <tr>
                            <th>Korisnicko ime: </th>
                            <td><input type="text" name="korisnickoIme" id="korisnickoIme"></td>
                        </tr>
                        <tr>
                            <th>Lozinka: </th>
                            <td><input type="text" name="lozinka" id="lozinka"></td>
                        </tr>
                        <tr>
                            <th>Ime: </th>
                            <td><input type="text" name="ime" id="ime"></td>
                        </tr>
                        <tr>
                            <th>Prezime: </th>
                            <td><input type="text" name="prezime" id="prezime"></td>
                        </tr>
                        <tr>

                            <th>Pol: </th>
                            <td>
                                <select id="pol" name="pol">
                                    <option value="Muski" id="Muski">Muski</option>
                                    <option value="Zenski" id="Zenski">Zenski</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <th>JMBG: </th>
                            <td><input type="text" name="jmbg" id="jmbg"></td>
                        </tr>
                        <tr>
                            <th>Kontakt telefon: </th>
                            <td><input type="text" name="kontaktTelefon" id="kontaktTelefon"></td>
                        </tr>
                        <tr>
                            <th>E-mail: </th>
                            <td><input type="text" name="email" id="email"></td>
                        </tr>
                        <tr>
                            <th>Godiste vozila: </th>
                            <td><input type="text" readonly id="godisteAutomobila"></td>
                        </tr>
                        <tr>
                            <th>Broj registarske oznake: </th>
                            <td><input type="text" readonly id="registracija"></td>
                        </tr>
                        <tr>
                            <th>Broj taksi vozila: </th>
                            <td><input type="text" readonly id="brojTaksiVozila"></td>
                        </tr>
                        <tr>
                            <th>Tip vozila: </th>
                            <td>
                                <select id="tipAutomobila" name="tipAutomobila">
                                    <option value="Putnicki" id="Putnicki">Putnicki</option>
                                    <option value="Kombi" id="Kombi">Kombi</option>
                                    <option value="Podrazumevani" id="Podrazumevani">Podrazumevani</option>
                                </select>
                            </td>
                        </tr>
                        <tr><input type="hidden" name="uloga" id="uloga" value="Vozac"></tr>
                        <tr>
                            <th>Voznje: </th>
                            <td><input type="text" name="voznje"></td>
                        </tr>
                        <tr>
                            <td colspan="2" align="center"><input type="submit" value="Sačuvaj"></td>
                        </tr>
                    </table>
                </p>
            </form>
            <script>
                validatePromeniVozaca();
            </script>
            
        </div>

        <div id="Lokacija" class="tabcontent">
            <form method="post" id="promenaLokacije">
                <table border="1">
                    <tr>
                        <th>Vasa lokacija:</th>
                        <td><input type="text" readonly id="lokacija1" name="lokacija1"></td>
                    </tr>
                    <tr>
                        <th>Unesite trenutnu lokaciju:</th>
                        <td><input type="text" name="lokacija2" id="lokacija2"><input type="hidden" name="korisnickoImeVozaca" id="korisnickoImeVozaca"></td>
                    </tr>
                    <tr>
                        <td colspan="2" align="center"><input type="submit" id="dugme" value="Sacuvaj"></td>
                    </tr>
                </table>
            </form>
            <script>
                promeniLokacijuFunkcijaValidate();
            </script>
        </div>

        <div id="Trenutna voznja" class="tabcontent">
            Vasa trenutna lokacija: <input type="text" name="lokacija">
            Status voznje: <select>
                <option value="Neuspesna">Neuspesna</option>
                <option value="Uspesna">Uspesna</option>
            </select>
            <input type="submit" value="Sacuvaj">
        </div>
    </body>
</html>